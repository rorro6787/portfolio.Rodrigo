---
import LinkInline from "./LinkInline.astro"
import GitHub from "./icons/GitHub.astro"
import LinkButton from "./LinkButton.astro"
import Link from "./icons/Link.astro"
import { info } from "node_modules/astro/dist/core/logger/core"
import { Code } from "astro:components"
import CodeIcon from "@/components/icons/Code.astro"
import MAIL from "./icons/System.astro"
import DIPLOMA from "./icons/diploma.astro"

interface Props {
  title: string
  company: string
  link?: string
  information?: string
  date: string
}

const { title, company, link, information, date } = Astro.props
---

<div
  class="certification-item relative mx-12 pb-8 grid before:absolute before:left-[-35px] before:block before:h-full before:border-l-2 before:border-dashed before:border-blue-400/40 dark:before:border-blue-400/30 before:content-[''] md:grid-cols-1 md:gap-10 md:space-x-4]"
>
  <div class="relative">
    <div class="certification-card group">
      <div class="cert-badge -left-[54px] absolute">
        <div class="relative">
          <svg class="w-10 h-10 text-blue-400 cert-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M15 15m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
            <path d="M13 17.5v4.5l2 -1.5l2 1.5v-4.5" />
            <path d="M10 19h-5a2 2 0 0 1 -2 -2v-10c0 -1.1 .9 -2 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -1 1.73" />
            <path d="M6 9l12 0" />
            <path d="M6 12l3 0" />
            <path d="M6 15l2 0" />
          </svg>
          <span class="absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full animate-ping"></span>
          <span class="absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full"></span>
        </div>
      </div>

      <div class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-blue-950/30 dark:via-indigo-950/30 dark:to-purple-950/30 p-5 rounded-xl border border-blue-200 dark:border-blue-800/40 shadow-lg hover:shadow-2xl hover:shadow-blue-500/30 transition-all duration-300 hover:-translate-y-1 overflow-hidden relative">
        <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-500"></div>
        
        <div class="relative z-10">
          <div class="flex items-start gap-3 mb-3">
            <div class="flex-shrink-0 mt-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-blue-500 dark:text-blue-400" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M14.5 21h-5.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8" />
                <path d="M11 17a2 2 0 0 1 2 2" />
                <path d="M20 21l2 -2l-2 -2" />
                <path d="M17 17l-2 2l2 2" />
              </svg>
            </div>
            <div>
              <h3 class="text-lg font-bold text-blue-600 dark:text-blue-400 leading-tight mb-2">{title}</h3>
              <h4 class="font-semibold text-base text-gray-700 dark:text-gray-200 flex items-center gap-2 mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-500" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M3 21l18 0" />
                  <path d="M9 8l1 0" />
                  <path d="M9 12l1 0" />
                  <path d="M9 16l1 0" />
                  <path d="M14 8l1 0" />
                  <path d="M14 12l1 0" />
                  <path d="M14 16l1 0" />
                  <path d="M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16" />
                </svg>
                {company}
              </h4>
              <time class="inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/40 rounded-md">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" />
                  <path d="M16 3v4" />
                  <path d="M8 3v4" />
                  <path d="M4 11h16" />
                </svg>
                {date}
              </time>
            </div>
          </div>
          
          {(link || information) && (
            <div class="flex flex-wrap gap-3 mt-4 pt-4 border-t border-blue-200 dark:border-blue-800/30">
              {link && (
                <LinkButton href={link}>
                  <DIPLOMA class="size-4" />
                  View Certificate
                </LinkButton>
              )}   
              {information && (
                <LinkButton href={information}>
                  <Link class="size-4" />
                  More Info
                </LinkButton>
              )}
            </div>
          )}
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .certification-item {
    opacity: 0;
    animation: fadeInScale 0.6s ease-out forwards;
  }

  .certification-card {
    animation: slideUp 0.7s ease-out forwards;
    animation-delay: 0.1s;
    opacity: 0;
  }

  .cert-badge {
    animation: rotateIn 0.6s ease-out forwards;
    animation-delay: 0.2s;
    opacity: 0;
  }

  .cert-icon {
    animation: swing 2s ease-in-out infinite;
    animation-delay: 0.8s;
    transform-origin: top center;
  }


  @keyframes fadeInScale {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes rotateIn {
    from {
      opacity: 0;
      transform: rotate(-180deg) scale(0);
    }
    to {
      opacity: 1;
      transform: rotate(0deg) scale(1);
    }
  }

  @keyframes swing {
    0%, 100% {
      transform: rotate(0deg);
    }
    25% {
      transform: rotate(10deg);
    }
    75% {
      transform: rotate(-10deg);
    }
  }
</style>
