---
import CertificationsItem from "./CertificationsItem.astro"

const CERTIFICATIONS = [
  {
    date: "July 2025",
    title: "Oracle AI Vector Search Certified Professional",
    company: "Oracle",
    link: "https://catalog-education.oracle.com/ords/certview/sharebadge?id=4A92B86FB26278A35CE8E68B3BD4BAA3B01B2EB7E24EF7E9CC470ABFDA5B5C61",
  },
  {
    date: "July 2025",
    title: "Oracle Cloud Infrastructure 2025 Certified Data Science Professional",
    company: "Oracle",
    link: "https://catalog-education.oracle.com/ords/certview/sharebadge?id=2BDDDCD9363B054F5122AF769B77E8BA9F368CE7E45238AA15AB3247D45C9CD4",
  },
  {
    date: "July 2025",
    title: "Oracle Cloud Infrastructure 2025 Generative AI Certified Professional",
    company: "Oracle",
    link: "https://catalog-education.oracle.com/ords/certview/sharebadge?id=40B97065B7DE4C06687FB0689D921902ABC9779F7A2B76153DE87F9AC6ECAF63",
  },
  {
    date: "October 2024",
    title: "Salesforce AI Associate",
    company: "Salesforce",
    link: "https://github.com/rorro6787/rorro6787/blob/main/Images/Salesforce_AI_Associate.pdf",
  },
  {
    date: "October 2024",
    title: "Disaster Risk Monitoring Using Satellite Imagery",
    company: "Nvidia DLI",
    link: "https://learn.nvidia.com/certificates?id=9nn5auHiTg-pNW5kd4o-EA#",
  },
  {
    date: "October 2024",
    title: "Getting Started with AI on Jetson Nano",
    company: "Nvidia DLI",
    link: "https://learn.nvidia.com/certificates?id=PgFiuC9URCa0CyNw5C7HKQ",
  },
  {
    date: "August 2024",
    title: "Efficient Large Language Model (LLM) Customization",
    company: "Nvidia DLI",
    link: "https://learn.nvidia.com/certificates?id=zsC9V4AyQXesN06iAhXuYQ#",
  },
  {
    date: "July 2024",
    title: "Oracle Guided Learning Content Developer Certified Foundations Associate",
    company: "Oracle",
    link: "https://catalog-education.oracle.com/pls/certview/sharebadge?id=F09397A2CCA0CCE103FD6E5FD4871757D1B8514D64F6CB652E6FC8BE30D753B8",
  },
  {
    date: "July 2024",
    title: "Oracle Guided Learning Project Management Foundations Associate",
    company: "Oracle",
    link: "https://catalog-education.oracle.com/pls/certview/sharebadge?id=DCC06D1FE4C8D1E31A9756A7C47E22F6EFBCFAA116AF1FD0DCB9836D8E04410B",
  },
  {
    date: "July 2024",
    title: "Rapid Application Development with Large Language Models (LLMs)",
    company: "Nvidia DLI",
    link: "https://learn.nvidia.com/certificates?id=bqNe6vAJSPGOZKYifg4YpQ",
  },
  {
    date: "March 2024",
    title: "Building Transformer-Based Natural Language Processing Applications",
    company: "Nvidia DLI",
    link: "https://courses.nvidia.com/certificates/41b0cdb2f9714217aa7f65d4f23f8fc3/",
  },
  {
    date: "November 2023",
    title: "Fundamentals of Deep Learning",
    company: "Nvidia DLI",
    link: "https://courses.nvidia.com/certificates/ab163f0f315946509a663944a01e37e2/",
  },
  {
    date: "October 2023",
    title: "Fundamentals of Accelerated Computing with CUDA C/C++",
    company: "Nvidia DLI",
    link: "https://courses.nvidia.com/certificates/24256f061e75432899a9f7db2f0edebf/",
  },
  {
    date: "August 2023",
    title: "Git: Â¡de Noob a Pro!",
    company: "Mastermind",
    link: "https://mastermind.ac/certificates/b6a0dc594c9a4193aec061c398ae4a87",
  },
  {
    date: "May 2023",
    title: "Aprende a programar con Python",
    company: "Mastermind",
    link: "https://mastermind.ac/certificates/29bc709927a348e6bad0958ae8959088",
  },
  {
    date: "November 2022",
    title: "Aprende a usar bien Microsoft Word",
    company: "Udemy",
    link: "https://www.udemy.com/certificate/UC-477f01b1-4984-466c-b27b-45eda7ed0c72/",
  },
]

// Group certifications by company
const groupedByCompany = CERTIFICATIONS.reduce((acc, cert) => {
  if (!acc[cert.company]) {
    acc[cert.company] = []
  }
  acc[cert.company].push(cert)
  return acc
}, {} as Record<string, typeof CERTIFICATIONS>)

// Sort companies to have the most certifications first
const sortedCompanies = Object.entries(groupedByCompany).sort(
  ([, a], [, b]) => b.length - a.length
)
---

<div class="relative mt-16 certifications-container">
  {
    sortedCompanies.map(([company, certs], companyIndex) => (
      <details class="company-group" data-company={company} style={`animation-delay: ${companyIndex * 0.15}s`}>
        <summary class="company-header">
          <div class="company-info">
            <div class="company-badge">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M3 21l18 0" />
                <path d="M9 8l1 0" />
                <path d="M9 12l1 0" />
                <path d="M9 16l1 0" />
                <path d="M14 8l1 0" />
                <path d="M14 12l1 0" />
                <path d="M14 16l1 0" />
                <path d="M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16" />
              </svg>
            </div>
            <div class="company-details">
              <h3 class="company-name">{company}</h3>
              <span class="cert-count">{certs.length} {certs.length === 1 ? 'certification' : 'certifications'}</span>
            </div>
          </div>
          <svg class="chevron" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 9l6 6l6 -6" />
          </svg>
        </summary>
        <div class="certifications-list">
          {certs.map((cert, index) => (
            <div class="certification-item-wrapper" style={`animation-delay: ${index * 0.1}s`}>
              <CertificationsItem {...cert} />
            </div>
          ))}
        </div>
      </details>
    ))
  }
</div>

<style>
  .certifications-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .company-group {
    opacity: 0;
    animation: fadeInScale 0.6s ease-out forwards;
    background: linear-gradient(to bottom right, rgb(239 246 255) 0%, rgb(224 242 254) 100%);
    border: 1px solid rgb(191 219 254);
    border-radius: 1rem;
    padding: 0.5rem;
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .company-group:hover {
    box-shadow: 0 10px 25px -5px rgb(59 130 246 / 0.2);
    transform: translateY(-2px);
  }

  :global(.dark) .company-group {
    background: linear-gradient(to bottom right, rgb(30 58 138 / 0.2) 0%, rgb(29 78 216 / 0.2) 100%);
    border-color: rgb(37 99 235 / 0.3);
  }

  .company-group[open] {
    padding-bottom: 1.5rem;
  }

  .company-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.25rem 1.5rem;
    border-radius: 0.75rem;
    transition: all 0.3s ease;
    list-style: none;
  }

  .company-header::-webkit-details-marker {
    display: none;
  }

  .company-header:hover {
    background: rgb(219 234 254 / 0.5);
  }

  :global(.dark) .company-header:hover {
    background: rgb(30 64 175 / 0.2);
  }

  .company-info {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .company-badge {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 3rem;
    height: 3rem;
    background: linear-gradient(135deg, rgb(59 130 246) 0%, rgb(37 99 235) 100%);
    border-radius: 0.75rem;
    color: white;
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
    transition: all 0.3s ease;
  }

  .company-group:hover .company-badge {
    transform: scale(1.1) rotate(5deg);
    box-shadow: 0 10px 15px -3px rgb(59 130 246 / 0.4);
  }

  .company-details {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .company-name {
    font-size: 1.25rem;
    font-weight: 700;
    color: rgb(30 64 175);
    margin: 0;
  }

  :global(.dark) .company-name {
    color: rgb(147 197 253);
  }

  .cert-count {
    font-size: 0.875rem;
    font-weight: 600;
    color: rgb(59 130 246);
    background: rgb(219 234 254);
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    width: fit-content;
  }

  :global(.dark) .cert-count {
    color: rgb(147 197 253);
    background: rgb(30 58 138 / 0.4);
  }

  .chevron {
    color: rgb(59 130 246);
    transition: transform 0.3s ease;
    flex-shrink: 0;
  }

  :global(.dark) .chevron {
    color: rgb(96 165 250);
  }

  .company-group[open] .chevron {
    transform: rotate(180deg);
  }

  .certifications-list {
    padding: 1rem 1.5rem 0;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .certification-item-wrapper {
    opacity: 0;
    animation: slideInUp 0.5s ease-out forwards;
  }

  @keyframes fadeInScale {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<script>
  // Add click tracking and smooth animation
  document.addEventListener('DOMContentLoaded', () => {
    const companyGroups = document.querySelectorAll('.company-group')
    
    companyGroups.forEach(group => {
      group.addEventListener('toggle', (e) => {
        const target = e.target as HTMLDetailsElement
        if (target.open) {
          // Scroll into view when opened
          setTimeout(() => {
            target.scrollIntoView({ behavior: 'smooth', block: 'nearest' })
          }, 100)
        }
      })
    })
  })
</script>
